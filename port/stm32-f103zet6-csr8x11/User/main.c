/*
*********************************************************************************************************
*
*	ģ������ : ������ģ�顣
*	�ļ����� : main.c
*	��    �� : V1.0
*	˵    �� : ��ʵ����ҪѧϰFreeRTOS����ֲ
*              ʵ��Ŀ�ģ�
*                 1. ѧϰFreeRTOS����ֲ��
*              ʵ�����ݣ�
*                 1. �����������ĸ�����
*                    vTaskTaskUserIF ����: �ӿ���Ϣ��������������LED��˸	
*                    vTaskLED        ����: LED��˸
*                    vTaskMsgPro     ����: ��Ϣ����������������LED��˸
*                    vTaskStart      ����: ��������Ҳ����������ȼ�������������LED��˸
*              ע�����
*                 1. ��ʵ���Ƽ�ʹ�ô�������SecureCRT��Ҫ�����ڴ�ӡЧ�������롣��������
*                    V4��������������С�
*                 2. ��ؽ��༭��������������TAB����Ϊ4���Ķ����ļ���Ҫ��������ʾ�����롣
*
*	�޸ļ�¼ :
*		�汾��    ����         ����            ˵��
*       V1.0    2016-03-15   Eric2013    1. ST�̼��⵽V3.6.1�汾
*                                        2. BSP������V1.2
*                                        3. FreeRTOS�汾V8.2.3
*
*	Copyright (C), 2016-2020, ���������� www.armfly.com
*
*********************************************************************************************************
*/
#include "includes.h"



/*
**********************************************************************************************************
											��������
**********************************************************************************************************
*/
#if 0
static void AppTaskCreate (void);

/*
**********************************************************************************************************
											��������
**********************************************************************************************************
*/
static TaskHandle_t vHandleTaskATCommand = NULL;
static TaskHandle_t xHandleTaskBT = NULL;
extern void vBT_Task(void *pvParameters);
#endif
/*
*********************************************************************************************************
*	�� �� ��: main
*	����˵��: ��׼c������ڡ�
*	��    �Σ���
*	�� �� ֵ: ��
*********************************************************************************************************
*/
int main(void)
{
	/* 
	  ����������ǰ��Ϊ�˷�ֹ��ʼ��STM32����ʱ���жϷ������ִ�У������ֹȫ���ж�(����NMI��HardFault)��
	  �������ĺô��ǣ�
	  1. ��ִֹ�е��жϷ����������FreeRTOS��API������
	  2. ��֤ϵͳ�������������ܱ���ж�Ӱ�졣
	  3. �����Ƿ�ر�ȫ���жϣ���Ҹ����Լ���ʵ��������ü��ɡ�
	  ����ֲ�ļ�port.c�еĺ���prvStartFirstTask�л����¿���ȫ���жϡ�ͨ��ָ��cpsie i������__set_PRIMASK(1)
	  ��cpsie i�ǵ�Ч�ġ�
     */
	//__set_PRIMASK(1);  
	
	/* Ӳ����ʼ�� */
	bsp_Init(); 
	
	//bt_init();
	
	//at_command_init();

	//cunit_init();
	/* �������� */
	//AppTaskCreate();
	
    /* �������ȣ���ʼִ������ */
    //vTaskStartScheduler();

	/* 
	  ���ϵͳ���������ǲ������е�����ģ����е����Ｋ�п��������ڶ�ʱ��������߿��������
	  heap�ռ䲻����ɴ���ʧ�ܣ���Ҫ�Ӵ�FreeRTOSConfig.h�ļ��ж����heap��С��
	  #define configTOTAL_HEAP_SIZE	      ( ( size_t ) ( 17 * 1024 ) )
	*/
	while(1);
}

/*
*********************************************************************************************************
*	�� �� ��: AppTaskCreate
*	����˵��: ����Ӧ������
*	��    �Σ���
*	�� �� ֵ: ��
*********************************************************************************************************
*/
#if 0
static void AppTaskCreate (void)
{
    xTaskCreate( vTaskATCommand,   	/* ������  */
                 "vTaskATCommand",     	/* ������    */
                 512,               	/* ����ջ��С����λword��Ҳ����4�ֽ� */
                 NULL,              	/* �������  */
                 2,                 	/* �������ȼ�*/
                 &vHandleTaskATCommand );  /* ������  */
	
    xTaskCreate( vBT_Task,	      	    
                 "vBT_Task",     	    
                 512,               	
                 NULL,              	
                 4,                 	
                 &xHandleTaskBT );
}
#endif
/***************************** ���������� www.armfly.com (END OF FILE) *********************************/
